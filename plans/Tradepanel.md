Ниже — **финальная, цельная структура торговой панели**, без кода, без реализации, без вариантов.
Это можно **напрямую отдавать LLM-разработчику / архитектору / дизайнеру** как эталон.

---

# Финальная структура торговой панели DEX-бота

## Контекст экрана

Экран всегда работает **в контексте одного токена**.
Контекст задаётся **вставкой адреса контракта**.

После загрузки токена **контекст не теряется ни при каких действиях**.

---

## 1. Шапка экрана (Header — фиксированная)

**Всегда видна. Не меняется при переключении режимов.**

### Содержит:

* Название токена
* Тикер токена
* Короткий адрес контракта

### Назначение:

* Зафиксировать, **с каким токеном работает пользователь**
* Исключить ошибки при торговле

---

## 2. Панель управления режимами (Control Bar)

**Расположена под шапкой. Всегда доступна.**

### Кнопки режимов:

* Buy
* Sell
* Limit
* Track

### Поведение:

* Активный режим подсвечен
* Нажатие кнопки:

  * **меняет режим**
  * **не меняет экран**
* Контекст токена сохраняется

---

## 3. Информационный блок токена (Token Info — всегда видим)

**Никогда не скрывается.**

### Отображается:

* Название токена
* Market Cap (USD)
* Liquidity (USD)

### Назначение:

* Пользователь всегда видит:

  * с каким активом работает
  * в каком он рыночном состоянии

---

## 4. Информационный блок пользователя (User Info)

**Всегда видим.**

### Отображается:

* Баланс в SOL
* Баланс в USD
* Наличие активного ордера (да / нет)

### Назначение:

* Понимание торговых ограничений
* Контроль состояния аккаунта

---

## 5. Рабочая область (Action Area — динамическая)

**Единственный блок, который меняется в зависимости от режима.**

---

### 5.1 Режим Buy / Sell (по рынку)

**Отображается:**

* Кнопка Buy или Sell
* Три кнопки суммы в USD (кастомные)
* Slippage
* Управление газом
* Кнопка подтверждения сделки

**Назначение:**

* Мгновенная покупка или продажа токена

---

### 5.2 Режим Limit (лимитный ордер)

**Отображается:**

* Цена лимитного ордера
* Сумма ордера в USD
* Кнопка размещения ордера
* Статус лимитного ордера (если есть)

**Важно:**

* Блок Token Info остаётся видимым
* Шапка остаётся видимой
* Пользователь всегда понимает, **на какой токен ставит лимит**

---

### 5.3 Режим Track (отслеживание позиции)

**Отображается:**

* Название токена
* Цена входа
* Текущая цена
* Размер позиции
* PNL в USD
* PNL в процентах

**Поведение:**

* Если позиции нет — пустое состояние
* Если позиция есть — данные обновляются

**Назначение:**

* Контроль результата сделки
* Быстрый анализ прибыли / убытка

---

## 6. Правила видимости (ключевые)

### Всегда видны:

* Шапка экрана
* Панель режимов
* Информация о токене
* Информация о пользователе

### Меняется только:

* Рабочая область (Action Area)

---

## 7. Логика режимов (человеческая)

* Токен — **якорь интерфейса**
* Buy / Sell / Limit / Track — **режимы работы с этим токеном**
* Переключение режима:

  * не сбрасывает контекст
  * не скрывает ключевую информацию

---

## 8. Ключевой принцип системы

> **Пользователь всегда видит:**
>
> 1. С каким токеном он работает
> 2. Что именно он сейчас делает
> 3. Какой результат он получает

---

## 9. Итог

Это:

* не набор экранов
* не мастер-форма
* не пошаговый флоу

А **единая торговая панель с фиксированным контекстом токена и сменой режимов**.

